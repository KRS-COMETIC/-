<script>
const lucaWords = [
  "……無理はしない。今日はそれでいい。",
  "周りに合わせすぎ。少し、自分を優先して。",
  "静かな時間が、答えをくれると思う。",
  "今は準備のとき。焦る必要はない。",
  "やるなら、最後まで。中途半端は嫌い。",
  "今日は、ちゃんと休みなよ。",
  "大丈夫。思ってるより、ちゃんと出来てる。"
];

const button = document.querySelector("button");
const result = document.getElementById("result");

// 今日見られるかチェック
function canShowToday() {
  const lastDate = localStorage.getItem("lucaDate");
  const today = new Date().toISOString().split("T")[0]; // YYYY-MM-DD
  return lastDate !== today;
}

// メッセージを表示
function showLuca() {
  if (!canShowToday()) {
    // 今日もう見た場合は画面上に "(・・・・・・・・・)" を表示
    result.textContent = "(・・・・・・・・・)";
    result.style.opacity = 1;

    // ボタンは無効化
    button.disabled = true;
    button.style.opacity = 0.5;
    return;
  }

  // ボタンをすぐ無効化して連打防止
  button.disabled = true;
  button.style.opacity = 0.5;

  // ランダムにメッセージ選択
  const text = lucaWords[Math.floor(Math.random() * lucaWords.length)];

  // フェードアニメーション
  result.style.opacity = 0;
  setTimeout(() => {
    result.textContent = text;
    result.style.opacity = 1;
  }, 150);

  // 今日の日付を保存
  const today = new Date().toISOString().split("T")[0];
  localStorage.setItem("lucaDate", today);
}

// ページ読み込み時にボタン状態を確認
window.addEventListener("load", () => {
  if (!canShowToday()) {
    button.disabled = true;
    button.style.opacity = 0.5;
    result.textContent = "(・・・・・・・・・)";
    result.style.opacity = 1;
  }
});
</script>
